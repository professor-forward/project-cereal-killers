{"ast":null,"code":"var _jsxFileName = \"D:\\\\uOttawa\\\\2022 W\\\\CSI 3140\\\\Project\\\\project-cereal-killers\\\\cupid_arrow\\\\src\\\\Cards.js\",\n    _s = $RefreshSig$();\n\nimport \"./Cards.css\";\nimport React, { useState, useEffect } from 'react';\nimport TinderCard from \"react-tinder-card\";\nimport database from \"./firebase\";\nimport { collection, getDocs } from 'firebase/firestore/lite';\nimport { doc, updateDoc, arrayUnion, arrayRemove } from \"firebase/firestore/lite\";\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Cards() {\n  _s();\n\n  const [lastDirection, setLastDirection] = useState([]);\n  const [people, setPeople] = useState([]);\n  const auth = getAuth();\n  onAuthStateChanged(auth, user => {\n    if (user) {\n      const uid = user.uid;\n      console.log(uid);\n    } else {\n      console.log(\"Where???\");\n    }\n  }); // Every time swipe the card , call swiped function to log the swipe name and direction\n\n  async function swiped(direction, nameToSwipe, peopleId, uid) {\n    setLastDirection(direction);\n\n    if (direction == \"right\") {\n      console.log(\"removing: \" + nameToSwipe);\n      const docRef = doc(database, 'people/' + uid);\n      await updateDoc(docRef, {\n        //User's document id \n        likes: arrayUnion(doc(database, 'people/' + peopleId))\n      });\n      console.log(\"Add \" + nameToSwipe + \" to like\");\n    } else {\n      console.log(\"Dislike\");\n    }\n  } // Log which person leave the screen\n\n\n  function outOfFrame(name) {\n    console.log(name + \"left the screen\");\n  }\n\n  useEffect(() => {\n    // collection(database,'people').onSnapshot(snapshot => (\n    //     snapshot.docs.map(doc => doc.data())\n    // ))\n    // const peopleSnapshot = await getDocs(collection(database, 'people'))\n    // peopleSnapshot.docs.map(doc => doc.data())\n    async function getPeople() {\n      const peopleSnapshot = await getDocs(collection(database, 'people'));\n      const peopleList = peopleSnapshot.docs.map(doc => {\n        const id = doc.id;\n        const data = doc.data();\n        return {\n          id,\n          ...data\n        };\n      });\n      setPeople(peopleList);\n      return peopleList;\n    }\n\n    (async () => {\n      const unsubscribe = await getPeople();\n      return () => {\n        unsubscribe();\n      };\n    })();\n  }, []);\n\n  function havePic(person) {\n    if (person.name != null && person.url != null && person.url != \"\" && person.url != \"none\") return true;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"swipe_container\",\n    children: [/*#__PURE__*/_jsxDEV(ArrowBackIosIcon, {\n      className: \"arrowBack\",\n      sx: {\n        fontSize: 100\n      },\n      color: \"disabled\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cards_container\",\n      children: people.map(person => /*#__PURE__*/_jsxDEV(TinderCard, {\n        className: \"swipe\",\n        preventSwipe: ['up', 'down'],\n        onSwipe: dir => swiped(dir, person.name, person.id, `${uid}`),\n        onCardLeftScreen: () => outOfFrame(person.name),\n        children: havePic(person) ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          style: {\n            backgroundImage: `url(${person.url})`\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: person.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: [person.age != null ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Age: \", person.age, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 64\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 98\n              }, this), person.job != null ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"job: \", person.job, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 64\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 98\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 33\n        }, this)\n      }, person.name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ArrowForwardIosIcon, {\n      className: \"arrowFor\",\n      sx: {\n        fontSize: 100\n      },\n      color: \"disabled\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Cards, \"X5YzLXjAsJPDcod30LFybHw7N2s=\");\n\n_c = Cards;\nexport default Cards;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cards\");","map":{"version":3,"sources":["D:/uOttawa/2022 W/CSI 3140/Project/project-cereal-killers/cupid_arrow/src/Cards.js"],"names":["React","useState","useEffect","TinderCard","database","collection","getDocs","doc","updateDoc","arrayUnion","arrayRemove","ArrowBackIosIcon","ArrowForwardIosIcon","getAuth","onAuthStateChanged","Cards","lastDirection","setLastDirection","people","setPeople","auth","user","uid","console","log","swiped","direction","nameToSwipe","peopleId","docRef","likes","outOfFrame","name","getPeople","peopleSnapshot","peopleList","docs","map","id","data","unsubscribe","havePic","person","url","fontSize","dir","backgroundImage","age","job"],"mappings":"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","sourcesContent":["import \"./Cards.css\"\r\nimport React, { useState, useEffect } from 'react'\r\nimport TinderCard from \"react-tinder-card\"\r\nimport database from \"./firebase\"\r\nimport { collection, getDocs } from 'firebase/firestore/lite';\r\nimport { doc, updateDoc, arrayUnion, arrayRemove } from \"firebase/firestore/lite\";\r\n\r\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\r\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\r\n\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\n\r\n\r\n\r\nfunction Cards() {\r\n    const [lastDirection, setLastDirection] = useState([])\r\n    const [people, setPeople] = useState([]);\r\n\r\n    const auth = getAuth();\r\n    onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        const uid = user.uid;\r\n        console.log(uid);\r\n      } else {\r\n        console.log(\"Where???\");\r\n      }\r\n    });\r\n\r\n    // Every time swipe the card , call swiped function to log the swipe name and direction\r\n    async function swiped (direction, nameToSwipe, peopleId, uid) {\r\n        setLastDirection(direction)\r\n        if (direction == \"right\") {\r\n            console.log(\"removing: \"+ nameToSwipe)\r\n            const docRef = doc(database, 'people/' + uid)\r\n            await updateDoc(docRef, {\r\n                 //User's document id \r\n                likes: arrayUnion(doc(database, 'people/'+ peopleId))\r\n            })\r\n            console.log(\"Add \"+ nameToSwipe+\" to like\")\r\n        } else {\r\n            console.log(\"Dislike\")\r\n        }\r\n        \r\n    }\r\n\r\n    // Log which person leave the screen\r\n    function outOfFrame(name) {\r\n        console.log(name + \"left the screen\")\r\n    }\r\n\r\n    useEffect(() => {\r\n        // collection(database,'people').onSnapshot(snapshot => (\r\n        //     snapshot.docs.map(doc => doc.data())\r\n        // ))\r\n\r\n        // const peopleSnapshot = await getDocs(collection(database, 'people'))\r\n        // peopleSnapshot.docs.map(doc => doc.data())\r\n        \r\n        async function getPeople(){\r\n            const peopleSnapshot = await getDocs(collection(database, 'people'));\r\n            const peopleList = peopleSnapshot.docs.map(doc => {\r\n                    const id = doc.id;\r\n                    const data = doc.data();\r\n                    return {id, ...data};\r\n                });\r\n            setPeople(peopleList);\r\n            return peopleList;\r\n        }\r\n\r\n        (async() => {\r\n            const unsubscribe = await getPeople();\r\n            \r\n            return() => {\r\n                unsubscribe();\r\n            }\r\n        })();\r\n        \r\n\r\n    },[])\r\n\r\n    function havePic (person) {\r\n        if (person.name != null && person.url != null && person.url != \"\" && person.url != \"none\") return true\r\n    }\r\n\r\n    return ( \r\n        <div className=\"swipe_container\">\r\n            <ArrowBackIosIcon className=\"arrowBack\" sx={{ fontSize: 100 }} color=\"disabled\"/>\r\n            <div className=\"cards_container\">\r\n                {people.map(person => (\r\n                    <TinderCard className = \"swipe\"\r\n                                key = {person.name}\r\n                                preventSwipe = {['up', 'down']}\r\n                                onSwipe = {(dir) => swiped(dir, person.name, person.id, `${uid}`)}\r\n                                onCardLeftScreen = {() => outOfFrame(person.name)} >\r\n                            {havePic(person) ? (\r\n                                <div className = \"card\" style = {{backgroundImage: `url(${person.url})`}}>\r\n                                <div className = \"info\">\r\n                                    <h3>{person.name}</h3>\r\n                                    <h5>\r\n                                        {person.age != null ? (<div>Age: {person.age} </div>) : (<div></div>)} \r\n                                        {person.job != null ? (<div>job: {person.job} </div>) : (<div></div>)}\r\n                                    </h5>\r\n                                </div>\r\n                                \r\n                                </div>\r\n                            ) : (\r\n                                <div></div>\r\n                            )}\r\n                            \r\n                    </TinderCard>\r\n                ))}\r\n                \r\n            </div>\r\n            <ArrowForwardIosIcon className=\"arrowFor\" sx={{ fontSize: 100 }} color=\"disabled\"/>\r\n        </div>\r\n            \r\n    )\r\n}\r\n\r\n\r\n\r\nexport default Cards"]},"metadata":{},"sourceType":"module"}